<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Kölner Regatta-Verband e.V.</title>
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="bootstrap3.1.1/css/bootstrap.css" />
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<script src="js/libs/jquery-1.11.0.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="js/libs/handlebars-v1.3.0.js"></script>
	<script src="js/libs/moment-with-langs.min.js"></script>
	<script src="js/libs/ember-1.5.1.js"></script>
	<script src="js/libs/ember-data.js"></script>
	<script src="bootstrap3.1.1/js/bootstrap.js"></script>
	<script src="js/view/view_app.js"></script>
	<script src="js/view/view_hbs.js"></script>
</head>
<body>
	<script type="text/x-handlebars">
		<div class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand krg_rot visible-md visible-lg visible-xs"  href="/">Kölner Regatta-Verband e.V.</a>
					<a class="navbar-brand krg_rot visible-sm"  href="/">KRV e.V.</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li>{{#link-to 'races'}}Übersicht{{/link-to}}</li>
						<li>{{#link-to 'startlist' -1}}Startlisten{{/link-to}}</li>
						<li>
							{{#link-to 'result' -1}}Ergebnisse{{/link-to}}
						</li>
						<form class="navbar-form navbar-left" role="search" {{action "getRace" on="submit"}}>
							<div class="form-group">
								{{input value=wishRace type="number" class="form-control" placeholder="Nummer des Rennens"}}
							</div>
							<button class="btn btn-default" type="submit">Anfordern</button>
						</form>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li>
							<button class="btn btn-success navbar-btn" {{action "toggleUpdate"}}>
								<span class="visible-lg visible-xs" >Automatische Aktualisierung</span>
								<span class="glyphicon glyphicon-refresh visible-sm visible-md height20"></span>
							</button>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="container">
			<span id="pre-container">
			</span>
			<div id="container">
				{{outlet}}
			</div>
		</div>
	</script>

	<script type="text/x-handlebars" id="races">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">Übersicht</h3>
			</div>
			<div class="panel-body">
				<p>Übersicht über alle Rennen</p>
			</div>

			<!-- Table -->
			<table class="table">
				<tr>
					<th>
						Rennen
					</th>
					<th>
						Bootsklasse
					</th>
					<th>
						Name
					</th>
					<th>
						Startlisten
					</th>
					<th>
						Ergebnisse
					</th>
				</tr>
			
				{{#each}}
					<tr>
						<td>
							{{rennen}}
						</td>
						<td>
							{{bootsklasse}}
						</td>
						<td>
							{{nameGerman}}
						</td>
						<td>
							{{#link-to 'startlist' id}}A{{/link-to}}
						</td>
						<td>
							{{#link-to 'result' id}}B{{/link-to}}
						</td>
					</tr>
				{{else}}
					sorry there is no race
				{{/each}}
			</table>
		</div>
		
		{{outlet}}
	</script>

	<script type="text/x-handlebars" id="startlist">
		<div class="background-complementairy">
			<div class="row">
				<div class="col-md-11">
					<div class="page-header">
				  		<h1>{{general.NameD}} <small class='visible-sm visible-xs background-complementairy'>Rennen {{general.Rennen}}</small></h1>
				  	</div>
				</div>
				<div class="col-md-1 visible-md visible-lg" id="rennen_nummer">{{general.Rennen}}</div>
			</div>
		</div>
		<div class="panel panel-default panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">Allgemein</h3>
			</div>
			<div class="panel-body">
			    <div class="row">
				    <div class="col-md-3 col-xs-6">{{amountBoats}} Boote</div>
				    <div class="col-md-3 col-xs-6">{{amountSections}} Abteilung(en)</div>
				    <div class="col-md-3 col-xs-6">{{general.NameK}}</div>
				    <div class="col-md-3 col-xs-6">{{general.Distanz}} m</div>
			    </div>
			</div>
		</div>
		<div class="background-complementairy">
			<h2>Abteilungen</h2>
		</div>
		<div class="row">
			{{#each abteilungen}}
				{{#everyOther 2}}
				{{else}}
					<div class="same_row">
				{{/everyOther}}
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<div class="row">
								<div class="col-md-6 col-xs-6">
									<h4>{{general.lauf_pretty}}</h4>
								</div>
								<div class="col-md-6 col-xs-6">
									<h4 class="text-right">Rennen {{general.Rennen}} | {{general.NameK}}</h4>
								</div>
							</div>
						</div>
						<div class="panel-body">
							<p>Startzeit: {{momentFormat general.SollStartZeit}} ({{momentNow general.SollStartZeit}})</p>
						</div>
						<div class="table-responsive">
							<table class="table table-striped">
								<tr>
									<th>Bahn</th>
									<th>Bug Nr.</th>
									<th>Teamname</th>
								</tr>
								{{#each boote}}
									<tr>
										<td>
											{{this.Bahn}}
										</td>
										<td>
											{{BugNr}}
										</td>
										<td>
											<a class="fake popoverToggle" href="#" data-container="body" data-toggle="popover" data-placement="bottom" data-content=''>
												{{Teamname}}
											</a>
										</td>
									</tr>
								{{/each}}
							</table>
						</div>
					</div>
				</div>
				{{#everyOther 2}}
					</div>
				{{/everyOther}}	
			{{/each}}
		</div>
	</script>

	<script type="text/x-handlebars" id="result">
		<div class="background-complementairy">
			<div class="row">
				<div class="col-md-11">
					<div class="page-header">
				  		<h1>{{general.NameD}} <small class='visible-sm visible-xs background-complementairy'>Rennen {{general.Rennen}}</small></h1>
				  	</div>
				</div>
				<div class="col-md-1 visible-md visible-lg" id="rennen_nummer">{{general.Rennen}}</div>
			</div>
		</div>
		<div class="panel panel-default panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">Allgemein</h3>
			</div>
			<div class="panel-body">
			    <div class="row">
				    <div class="col-md-3 col-xs-6">{{amountBoats}} Boote</div>
				    <div class="col-md-3 col-xs-6">{{amountSections}} Abteilung(en)</div>
				    <div class="col-md-3 col-xs-6">{{general.NameK}}</div>
				    <div class="col-md-3 col-xs-6">{{general.Distanz}} m</div>
			    </div>
			</div>
		</div>
		<div class="background-complementairy">
			<h2>Abteilungen</h2>
		</div>
		<div class="row">
			{{#each abteilungen}}
				{{#everyOther 2}}
				{{else}}
					<div class="same_row">
				{{/everyOther}}
				<div class="col-md-6">
					{{#if general.hasStarted}}
						<div class="panel panel-default panel-success">
					{{else}}
						<div class="panel panel-default">
					{{/if}}
						<div class="panel-heading">
							<div class="row">
								<div class="col-md-6 col-xs-6">
									<h4>{{general.lauf_pretty}}</h4>
								</div>
								<div class="col-md-6 col-xs-6">
									<h4 class="text-right">Rennen {{general.Rennen}} | {{general.NameK}}</h4>
								</div>
							</div>
						</div>
						<div class="table-responsive">
							<table class="table table-striped">
								<tr>
									<th>Bahn</th>
									<th>Bug Nr.</th>
									<th>Teamname</th>
									<th>Zeit</th>
								</tr>
								{{#each boote}}
									<tr>
										<td>
											{{#if ausgeschieden}}
												-
											{{else}}
												{{#if zielZeit}}
													{{Bahn}}
												{{else}}
													-
												{{/if}}
											{{/if}}
										</td>
										<td>{{BugNr}}</td>
										<td>
											<a class="fake popoverToggle" href="#" data-container="body" data-toggle="popover" data-placement="bottom"
											data-content='' >
												{{Teamname}}
											</a>
										</td>
										<td>
											{{#if ausgeschieden}}
												{{Kommentar}}
											{{else}}
												<a class="fake popoverToggle" href="#" data-container="body" data-toggle="popover" data-placement="bottom"
												data-content='' >
													{{zielZeit}}
												</a>
											{{/if}}
										</td>
									</tr>
								{{/each}}
							</table>
							<div class="panel-footer">
								<p>Startzeit: {{momentFormat general.SollStartZeit}} ({{momentNow general.SollStartZeit}})</p>
								<p>Schiedsrichter: {{general.umpire}} / Zielrichter: {{general.judge}}</p>
							</div>
						</div>
					</div>
				</div>
				{{#everyOther 2}}
					</div>
				{{/everyOther}}	
			{{/each}}
		</div>
	</script>
</body>
</html>